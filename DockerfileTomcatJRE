FROM alpine:jre17
LABEL author="JavaTechnoLessons"

ARG TOMCAT_VERSION=apache-tomcat-10.0.14

ENV CATALINA_HOME=/opt/${TOMCAT_VERSION}
ENV PATH=${PATH}:${CATALINA_HOME}/bin

ADD software/tomcat/${TOMCAT_VERSION}.tar.gz /opt

RUN adduser -u 1001 -H -D tomcat && \
    chown -R tomcat.tomcat ${CATALINA_HOME}

USER 1001

WORKDIR ${CATALINA_HOME}

EXPOSE 8080

CMD [ "catalina.sh" , "run"]
